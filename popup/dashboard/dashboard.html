<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Gone Phishin' - Security Dashboard</title>
    <link rel="stylesheet" href="dashboard.css">
</head>
<body>
    <!-- Navigation Header -->
    <header class="dashboard-header">
        <div class="header-content">
            <div class="logo-section">
                <div class="logo-icon">üõ°Ô∏è</div>
                <div class="logo-text">
                    <h1>Gone Phishin'</h1>
                    <p class="tagline">Security Dashboard</p>
                </div>
            </div>
            <nav class="nav-tabs">
                <button class="nav-tab active" data-tab="overview">Overview</button>
                <button class="nav-tab" data-tab="how-it-works">How It Works</button>
                <button class="nav-tab" data-tab="history">History</button>
                <button class="nav-tab" data-tab="whitelist">Whitelist</button>
                <button class="nav-tab" data-tab="transparency">Transparency</button>
            </nav>
        </div>
    </header>

    <!-- Main Content -->
    <main class="dashboard-content">
        <!-- Overview Tab -->
        <section class="tab-content active" id="overviewTab">
            <!-- Quick Stats -->
            <div class="stats-grid-simple">
                <div class="stat-card-simple">
                    <div class="stat-icon">üîí</div>
                    <div class="stat-content">
                        <div class="stat-value" id="totalUpgrades">0</div>
                        <div class="stat-label">HTTPS Upgrades</div>
                    </div>
                </div>
                <div class="stat-card-simple">
                    <div class="stat-icon">üö®</div>
                    <div class="stat-content">
                        <div class="stat-value" id="threatsDetected">0</div>
                        <div class="stat-label">Threats Detected</div>
                    </div>
                </div>
                <div class="stat-card-simple">
                    <div class="stat-icon">üõ°Ô∏è</div>
                    <div class="stat-content">
                        <div class="stat-value" id="sitesProtected">0</div>
                        <div class="stat-label">Sites Analyzed</div>
                    </div>
                </div>
            </div>

            <!-- Protection Status -->
            <section class="dashboard-section">
                <div class="section-header">
                    <h2>üõ°Ô∏è Protection Status</h2>
                </div>
                <div class="protection-status-grid">
                    <div class="protection-status-item active">
                        <div class="protection-icon">üîí</div>
                        <div class="protection-info">
                            <h3>HTTPS Enforcement</h3>
                            <p>Active - Automatically upgrades HTTP to HTTPS</p>
                        </div>
                        <div class="protection-badge active">Active</div>
                    </div>
                    <div class="protection-status-item active">
                        <div class="protection-icon">üîç</div>
                        <div class="protection-info">
                            <h3>Heuristic Analysis</h3>
                            <p>Active - Detecting phishing and suspicious behavior</p>
                        </div>
                        <div class="protection-badge active">Active</div>
                    </div>
                </div>
            </section>

            <!-- Recent Activity Preview -->
            <section class="dashboard-section">
                <div class="section-header">
                    <h2>üìä Recent Activity</h2>
                    <button class="view-all-btn" id="viewAllHistoryBtn">View All ‚Üí</button>
                </div>
                <div class="activity-preview" id="activityPreview">
                    <!-- Recent activity items will be inserted here -->
                </div>
            </section>
        </section>

        <!-- How It Works Tab -->
        <section class="tab-content" id="how-it-worksTab">
            <section class="dashboard-section">
                <div class="section-header">
                    <h2>üéì How Gone Phishin' Works</h2>
                </div>
                
                <div class="how-it-works-content">
                    <div class="explanation-card">
                        <div class="explanation-icon">üîí</div>
                        <h3>1. HTTPS Enforcement</h3>
                        <p><strong>Purpose:</strong> Prevents SSL stripping attacks by ensuring all connections use HTTPS.</p>
                        <p><strong>How it works:</strong></p>
                        <ul>
                            <li>Monitors all navigation requests in real-time</li>
                            <li>Detects HTTP connections to HTTPS-capable sites</li>
                            <li>Automatically redirects to HTTPS version</li>
                            <li>Blocks mixed content (HTTP resources on HTTPS pages)</li>
                        </ul>
                        <p class="note"><strong>Note:</strong> Localhost URLs are excluded from automatic HTTPS upgrades for development purposes.</p>
                    </div>

                    <div class="explanation-card">
                        <div class="explanation-icon">üîê</div>
                        <h3>2. Connection Security Check</h3>
                        <p><strong>Purpose:</strong> Verifies that sites use HTTPS with valid certificates.</p>
                        <p><strong>How it works:</strong></p>
                        <ul>
                            <li>Checks if the connection uses HTTPS protocol</li>
                            <li>Browser automatically validates certificates, checks expiration, and verifies CA trust</li>
                            <li>Extension supplements browser security but does not replace it</li>
                            <li><strong>Chrome MV3 Limitation:</strong> Advanced certificate monitoring (fingerprint tracking, issuer drift) requires Firefox MV2 version</li>
                        </ul>
                    </div>

                    <div class="explanation-card">
                        <div class="explanation-icon">üîç</div>
                        <h3>3. Heuristic Analysis</h3>
                        <p><strong>Purpose:</strong> Detects potential phishing and malicious websites using behavioral analysis.</p>
                        <p><strong>What it analyzes:</strong></p>
                        <ul>
                            <li><strong>Form Submissions:</strong> Detects forms submitting to external domains (especially with password fields)</li>
                            <li><strong>Link Patterns:</strong> Identifies suspicious external links and URL shorteners</li>
                            <li><strong>Hidden Elements:</strong> Detects hidden iframes that may be used for tracking or data collection</li>
                            <li><strong>Network Requests:</strong> Monitors POST requests to external domains for data exfiltration</li>
                            <li><strong>Dynamic Changes:</strong> Watches for dynamically added malicious elements</li>
                        </ul>
                        <p><strong>Scoring System:</strong></p>
                        <ul>
                            <li><strong>CRITICAL (80+):</strong> Block/Warn - High-risk threats detected</li>
                            <li><strong>WARNING (40-79):</strong> Notify User - Suspicious patterns detected</li>
                            <li><strong>SECURE (0-39):</strong> Passive Logging - No significant threats</li>
                        </ul>
                        <p class="note"><strong>False Positive Reduction:</strong> Legitimate services (Stripe, PayPal, OAuth providers) are whitelisted to reduce false alarms.</p>
                    </div>

                    <div class="explanation-card">
                        <div class="explanation-icon">üõ°Ô∏è</div>
                        <h3>4. Protection Layers</h3>
                        <p>The extension uses multiple layers of protection:</p>
                        <ol>
                            <li><strong>Prevention:</strong> HTTPS enforcement prevents downgrade attacks</li>
                            <li><strong>Detection:</strong> Heuristic analysis identifies suspicious behavior</li>
                            <li><strong>Notification:</strong> Users are alerted to potential threats via the extension popup</li>
                            <li><strong>Transparency:</strong> All detections are logged for review in the History tab</li>
                        </ol>
                    </div>
                </div>
            </section>
        </section>

        <!-- History Tab -->
        <section class="tab-content" id="historyTab">
            <section class="dashboard-section">
                <div class="section-header">
                    <h2>üìä Website History</h2>
                    <div class="filter-buttons">
                        <button class="filter-btn active" data-filter="all">All</button>
                        <button class="filter-btn" data-filter="critical">Critical</button>
                        <button class="filter-btn" data-filter="warning">Warnings</button>
                        <button class="filter-btn" data-filter="secure">Secure</button>
                    </div>
                </div>
                
                <div class="history-list" id="historyList">
                    <!-- History items will be inserted here -->
                </div>
            </section>
        </section>

        <!-- Whitelist Tab -->
        <section class="tab-content" id="whitelistTab">
            <section class="dashboard-section">
                <div class="section-header">
                    <h2>üõ°Ô∏è Whitelisted URLs</h2>
                    <button class="btn btn-secondary" id="refreshWhitelistBtn">
                        <span class="btn-icon">üîÑ</span>
                        <span>Refresh</span>
                    </button>
                </div>

                <div class="whitelist-info">
                    <p class="whitelist-description">
                        Sites in your whitelist will bypass security checks. Use this for trusted sites that may trigger false positives.
                    </p>
                </div>

                <div class="whitelist-container" id="whitelistContainer">
                    <div class="whitelist-loading">Loading whitelist...</div>
                </div>
            </section>
        </section>

        <!-- Transparency Tab -->
        <section class="tab-content" id="transparencyTab">
            <section class="dashboard-section">
                <div class="section-header">
                    <h2>üîç Extension Transparency</h2>
                </div>
                
                <div class="transparency-content">
                    <div class="transparency-section">
                        <h3>üìã Permissions & Access</h3>
                        <div class="permission-item">
                            <div class="permission-icon">üåê</div>
                            <div class="permission-info">
                                <h4>Host Permissions (<code>&lt;all_urls&gt;</code>)</h4>
                                <p><strong>Why:</strong> To analyze websites you visit and enforce HTTPS upgrades</p>
                                <p><strong>What it does:</strong> Allows the extension to read page content and network requests for security analysis</p>
                                <p><strong>Data:</strong> Analysis results are stored locally in your browser. No data is sent to external servers except URLScan.io API calls (with your consent).</p>
                            </div>
                        </div>

                        <div class="permission-item">
                            <div class="permission-icon">üíæ</div>
                            <div class="permission-info">
                                <h4>Storage Permission</h4>
                                <p><strong>Why:</strong> To store analysis results, whitelist, and statistics locally</p>
                                <p><strong>What it stores:</strong> Heuristic analysis results, HTTPS upgrade counts, whitelisted URLs, threat history</p>
                                <p><strong>Location:</strong> All data is stored locally using Chrome's <code>chrome.storage.local</code> API. No cloud storage.</p>
                            </div>
                        </div>

                        <div class="permission-item">
                            <div class="permission-icon">üîí</div>
                            <div class="permission-info">
                                <h4>Declarative Net Request</h4>
                                <p><strong>Why:</strong> To automatically upgrade HTTP to HTTPS connections</p>
                                <p><strong>What it does:</strong> Intercepts HTTP requests and redirects them to HTTPS when available</p>
                                <p><strong>Privacy:</strong> This happens locally in your browser. No external requests are made for this feature.</p>
                            </div>
                        </div>

                        <div class="permission-item">
                            <div class="permission-icon">üì°</div>
                            <div class="permission-info">
                                <h4>Web Request & Navigation APIs</h4>
                                <p><strong>Why:</strong> To monitor network activity and detect threats</p>
                                <p><strong>What it monitors:</strong> Page navigations, network requests (for heuristic analysis)</p>
                                <p><strong>Privacy:</strong> All analysis happens locally. Only URLScan.io API calls (optional) send URLs externally.</p>
                            </div>
                        </div>
                    </div>

                    <div class="transparency-section">
                        <h3>üîê Data Privacy</h3>
                        <div class="privacy-item">
                            <h4>What Data is Collected?</h4>
                            <ul>
                                <li><strong>Website Analysis:</strong> Heuristic analysis results (anomaly scores, detected threats) - stored locally</li>
                                <li><strong>HTTPS Upgrades:</strong> Count of upgrades performed - stored locally</li>
                                <li><strong>Whitelist:</strong> URLs you manually whitelist - stored locally</li>
                                <li><strong>No Personal Data:</strong> The extension does not collect passwords, personal information, or browsing history</li>
                            </ul>
                        </div>

                        <div class="privacy-item">
                            <h4>Where is Data Stored?</h4>
                            <ul>
                                <li><strong>Local Storage:</strong> All data is stored in your browser's local storage</li>
                                <li><strong>No Cloud Sync:</strong> Data is not synced to cloud services</li>
                                <li><strong>No External Servers:</strong> Except optional URLScan.io API calls (which you can see in the code)</li>
                            </ul>
                        </div>

                        <div class="privacy-item">
                            <h4>External Services</h4>
                            <ul>
                                <li><strong>URLScan.io:</strong> Optional API integration for URL reputation checking. Only called when you visit a site, and only sends the URL.</li>
                                <li><strong>No Tracking:</strong> The extension does not use analytics, tracking pixels, or telemetry</li>
                            </ul>
                        </div>
                    </div>

                    <div class="transparency-section">
                        <h3>üìñ Open Source</h3>
                        <div class="opensource-item">
                            <p>This extension is open source. You can review all code to verify:</p>
                            <ul>
                                <li>What permissions are used and why</li>
                                <li>What data is collected and where it's stored</li>
                                <li>What external services are called</li>
                                <li>How the heuristic analysis works</li>
                            </ul>
                            <p class="note"><strong>Academic Project:</strong> This extension was developed as an academic capstone project. All code is available for review.</p>
                        </div>
                    </div>
                </div>
            </section>
        </section>
    </main>

    <script src="dashboard.js"></script>
</body>
</html>
